import { Fragment } from 'react'
import { TimelineWrapper } from './timeline-wrapper'
import { timelineEntries } from './timeline-data'
import { TimelineEntry } from './timeline-entry'

export const metadata = {
  title: 'Whoami',
}

export const dynamic = 'force-static'

<div className="whoami-header">
  <h1 className="text-4xl sm:text-5xl font-bold text-rurikon-700 mb-3 tracking-tight eb-garamond-italic">Whoami</h1>
  <p className="text-rurikon-400 mb-8 text-lg eb-garamond-italic">Security researcher. I build exploits, reverse engineer malware, and break things professionally.</p>
</div>

<TimelineWrapper>
  {(() => {
    const BASE_DELAY = 0.12
    const DELAY_STEP = 0.18
    const reversedEntries = [...timelineEntries].reverse()

    return reversedEntries.map((entry, index) => {
      const previousYear = index === 0 ? null : reversedEntries[index - 1]?.year
      const showYearMarker = entry.year !== previousYear
      const key = `${entry.year}-${entry.month}-${index}`

      return (
        <Fragment key={key}>
          {showYearMarker && (
            <div className="timeline-year-marker">
              <span className="year-label">{entry.year}</span>
            </div>
          )}
          <TimelineEntry entry={entry} delay={BASE_DELAY + index * DELAY_STEP} />
        </Fragment>
      )
    })
  })()}
</TimelineWrapper>